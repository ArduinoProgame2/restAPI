<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>REST Page</title>
		<!-- Enlace a Bootstrap 5 CSS -->
		<!--<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>-->
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="bg-light">
		<!-- Header -->
			{{> header }}
		<!-- Nav -->
			{{> nav }}

		
		<div class="container mt-5">
			<section id="banner" ><!--class="small-img" data-bg="banner.jpg">-->
				
				<div class="inner top-section">
					<header>
						<h1>This is API Rest</h1>
					</header>
				</div>
				
				<!--<a href="#one" class="more">Learn More</a>-->
			</section>	
			<!-- Sección GET -->
			<section id="get" class="mb-5">
				<div class="card shadow-sm">
					<div class="card-header bg-primary text-white">
						<h2 class="h4">GET Request</h2>
					</div>
					<div class="card-body">
						<div class="mb-3">
							<label for="verbo" class="form-label">Verbo:</label>
							<input
								type="text"
								id="verbo"
								class="form-control"
								value="{{verbo}}"
								readonly
							/>
						</div>
						<div class="mb-3">
							<label for="msg" class="form-label">Mensaje:</label>
							<input
								type="text"
								id="msg"
								class="form-control"
								value="{{msg}}"
								readonly
							/>
						</div>
					</div>
				</div>
			</section>

			<!-- Sección POST -->
			<section id="post" class="mb-5">
				<div class="card shadow-sm">
					<div class="card-header bg-success text-white">
						<h2 class="h4">POST Request</h2>
					</div>
					<div class="card-body">
						<form id="postForm" method="POST" action="/api">
							<div class="mb-3">
								<label for="correo" class="form-label">Correo</label>
								<input
									type="email"
									class="form-control"
									id="correo"
									name="correo"
									required
								/>
							</div>
							<div class="mb-3">
								<label
									for="password"
									class="form-label"
								>Contraseña</label>
								<input
									type="password"
									class="form-control"
									id="password"
									name="password"
									required
								/>
							</div>
							<button
								type="submit"
								class="btn btn-primary"
							>Enviar</button>
						</form>

						<!-- Contenedor para mostrar la respuesta del servidor -->
						<div id="serverResponse" class="mt-3"></div>

					</div>
				</div>
			</section>

			<!-- Respuesta del servidor -->
			{{#if response}}
				<div id="response" class="alert alert-info" role="alert">
					<h4 class="alert-heading">Respuesta del servidor:</h4>
					<p>{{response}}</p>
				</div>
			{{/if}}
		</div>

		<!-- Enlace a Bootstrap 5 JS y Popper.js -->
		<script
			src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
		></script>
        <script>
                document.getElementById('postForm').addEventListener('submit', function(event) {
                event.preventDefault(); // Prevenir el envío del formulario y recarga de la página
                
                const correo = document.getElementById('correo').value;
                const password = document.getElementById('password').value;

                fetch('/api', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ correo, password })
                })
                .then(response => response.json())
                .then(data => {
					console.log('Success:', data);
					// Mostrar la respuesta del servidor en la página
        document.getElementById('serverResponse').innerHTML = `
            <div id="response" class="alert alert-info" role="alert">
                <h4 class="alert-heading">Respuesta del servidor:</h4>
                <p>${data.message}</p>
                <p><strong>Correo:</strong> ${data.data.correo}</p>
                <p><strong>Contraseña:</strong> ${data.data.password}</p>
            </div>`;
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('serverResponse').innerHTML = `<div class="alert alert-danger">Error al enviar los datos</div>`;
                });
            });
</script>
	<!-- Footer -->
			{{> footer }}
	</body>
</html>